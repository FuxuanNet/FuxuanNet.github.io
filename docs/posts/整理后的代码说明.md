# 整理后的代码说明

## 代码结构

```bash

# 原始论文代码

├── DOTA_devkit         # 代码原始文件夹
├── config              # 代码原始文件夹
├── datasets            # 代码原始文件夹
├── figs                # 代码原始文件夹
├── models              # 代码原始文件夹
├── util                # 代码原始文件夹
├── README.md           # 代码原始文件
├── draw_color.py       # 代码原始文件
├── engine.py           # 代码原始文件
├── imgnamefilev1_0.txt # 代码原始文件
├── main.py             # 代码原始文件
├── requirements.txt    # 代码原始文件
├── r50_dota_ss.pth     # 预训练模型权重

├── swin_t_dota_ms.pth  # 预训练模型权重

# 推理模板

├── inModel_adapter.py  # 模型导入代码，提供给 inference.py
├── inference.py        # 推理代码
├── predict.py          # 推理模板附带的代码
├── run_inference.sh    # 推理模板附带的代码
├── train.py            # 推理模板附带的代码
├── utils_evaluation.py # 推理模板附带的代码
├── utils_inference.py  # 推理模板附带的代码
├── utils_save.py       # 推理模板附带的代码
├── utils_tif.py        # 推理模板附带的代码
├── utils_visual.py     # 推理模板附带的代码
 
├── convert_dota15_to_coco.py   # 标注转换代码
├── convert_xml_to_coco.py      # 标注转换代码
├── convert_yolo_to_coco.py     # 标注转换代码

├── dota15_first10          # 数据集
├── dota15_first10_coco     # 转换后的数据集标注
├── dota15_small_coco       # 转换后的数据集标注
├── dota8                   # 数据集
├── dota8_coco              # 转换后的数据集标注
├── highFigure              # 数据集
├── highFigure_coco         # 转换后的数据集标注

├── logs                # main.py 日志及推理结果文件夹
├── out_test            # 推理模板结果文件夹

├── get-pip.py          # 配置环境的遗留代码，用于安装 pip
├── osgeo-0.0.1         # 配置环境的遗留代码，用于安装 osgeo
├── osgeo-0.0.1.tar.gz  # 配置环境的遗留代码，用于安装 osgeo
```

## 运行代码

### 训练

```bash
python main.py --output_dir logs/dota15_training -c config/dota/4scale_swint_ms_dota.py --coco_path dota15_first10_coco --dataset_file dota --pretrain_model_path swin_t_dota_ms.pth
```

### 推理

  
```bash
python inference.py /root/Oriented-DETR/highFigure/8641.png \
  --checkpoint swin_t_dota_ms.pth \
  --config_file config/dota/4scale_swint_ms_dota.py \
  --outdir ./out_test \
  --patch-sizes 1024 \
  --patch-steps 974 \
  --score-thr 0.5 \
  --device 0 \
  --class-name c0 c1 c2 c3 c4 c5 c6 c7 c8 c9 c10 c11 c12 c13 c14 \
  --save-result \
  --show-result \
--show-img-ext png
```
